var VpnProfileModalWindow,$VpnProfileEncapTypeSelect,VpnProfileEncapTypeSelect,$VpnProfilePhase1AlgoSelect,VpnProfilePhase1AlgoSelect,$VpnProfilePhase1AuthSelect,VpnProfilePhase1AuthSelect,$VpnProfilePhase1DhgSelect,VpnProfilePhase1DhgSelect,$VpnProfilePhase2AlgoSelect,VpnProfilePhase2AlgoSelect,$VpnProfilePhase2AuthSelect,VpnProfilePhase2AuthSelect,$VpnProfilePhase2DhgSelect,VpnProfilePhase2DhgSelect,$VpnProfileEncapLocalEndpointSelect,VpnProfileEncapLocalEndpointSelect,encap_local_endpoint_xhr,$VpnProfileEncapRemoteEndpointSelect,VpnProfileEncapRemoteEndpointSelect,encap_remote_endpoint_xhr,$VpnProfileEncapServiceSelect,VpnProfileEncapServiceSelect,encap_service_xhr,CurrentPage=1;$(function(){VpnProfile.loadTable(),VpnProfile.init(),VpnProfile.save(),VpnProfile.char_words_counter(),VpnProfile.form_validator()}),VpnProfile={init:function(){$(document).ready(function(){VpnProfileModalWindow=UIkit.modal("#window_VpnProfile"),VpnProfile.initEncapTypeSelect(),VpnProfile.initPhase1AlgoSelect(),VpnProfile.initPhase1AuthSelect(),VpnProfile.initPhase1DhgSelect(),VpnProfile.initPhase2AlgoSelect(),VpnProfile.initPhase2AuthSelect(),VpnProfile.initPhase2DhgSelect()})},add:function(){VpnProfileModalWindow.isActive()?VpnProfileModalWindow.hide():VpnProfileModalWindow.show(),this.clearValidationErrors(),this.loadAllSelects(),$("#window_vpnprofile_title").text(" Add new profile "),$("#window_vpnprofile_id").val("0"),$("#window_vpnprofile_row").val(parseInt($("#records_number").val())+1),$("#window_vpnprofile_name").val(""),$("#window_vpnprofile_desc").val(""),VpnProfileEncapTypeSelect.setValue("None"),VpnProfilePhase1AuthSelect.setValue("md5"),VpnProfilePhase1DhgSelect.setValue("1"),$("#window_vpnprofile_phase1lifetime").val("8"),VpnProfilePhase2AuthSelect.setValue("md5"),VpnProfilePhase2DhgSelect.setValue("1"),$("#window_vpnprofile_phase2lifetime").val("8"),VpnProfileEncapLocalEndpointSelect.setValue(),VpnProfileEncapRemoteEndpointSelect.setValue(),VpnProfileEncapServiceSelect.setValue(),$(".encap-field").hide(),$(".encap").hide(),$(".Multicast").hide(),$(".Point-To-Point").hide(),$(".Client-Server").hide(),$("#window_vpnprofile_name").focus()},edit:function(e){var t=e.id.split("-");VpnProfileModalWindow.isActive()?VpnProfileModalWindow.hide():VpnProfileModalWindow.show(),this.clearValidationErrors(),this.loadAllSelects(),$.getJSON("/vpn/profile/view",{VpnProfileId:t[2]},function(e){$("#window_vpnprofile_title").text(" Edit vpn profile ( "+e[0].Name+" ) "),$("#window_vpnprofile_id").val(e[0].VpnProfileId),$("#window_vpnprofile_row").val(t[1]),$("#window_vpnprofile_name").val(e[0].Name),$("#window_vpnprofile_desc").val(e[0].Description),VpnProfileEncapTypeSelect.setValue(e[0].EncapType),VpnProfilePhase1AlgoSelect.setValue(e[0].Phase1Algo),VpnProfilePhase1AuthSelect.setValue(e[0].Phase1Auth),VpnProfilePhase1DhgSelect.setValue(e[0].Phase1Dhg),$("#window_vpnprofile_phase1lifetime").val(e[0].Phase1LifeTime),VpnProfilePhase2AlgoSelect.setValue(e[0].Phase2Algo),VpnProfilePhase2AuthSelect.setValue(e[0].Phase2Auth),VpnProfilePhase2DhgSelect.setValue(e[0].Phase2Dhg),$("#window_vpnprofile_phase2lifetime").val(e[0].Phase2LifeTime),VpnProfileEncapLocalEndpointSelect.setValue(e[0].EncapLocalEndpoint),VpnProfileEncapRemoteEndpointSelect.setValue(e[0].EncapRemoteEndpoint),VpnProfileEncapServiceSelect.setValue(e[0].EncapService)}),$("#window_vpnprofile_name").focus()},remove:function(e){var t=e,n=e.id.split("-");UIkit.modal.confirm("Are you sure you want to delete this item?",function(){$.ajax({type:"POST",url:"/vpn/profile/delete",data:{VpnProfileId:n[2]},dataType:"json",success:function(e){setTimeout(UIkit.notify({message:e.Message,status:e.Status,timeout:2e3,pos:"top-center"}),5e3),"OK"===e.Result&&(t.closest("li").remove(),$("#records_number").val(parseInt($("#records_number").val())-1),VpnProfile.reloadTable(CurrentPage))}})})},isNotValid:function(e){return!e.parsley().isValid()},save:function(){$("#window_vpnprofile_save").click(function(){$("#window_vpnprofile_row").val();var e=$("#window_vpnprofile_id").val(),t="";if(t=$("#window_vpnprofile_name"),!VpnProfile.isNotValid(t)){var n=t.val();if(t=$("#window_vpnprofile_desc"),!VpnProfile.isNotValid(t)){var i=t.val();if(t=$("#window_vpnprofile_phase1lifetime"),!VpnProfile.isNotValid(t)){var a=t.val();if(t=$("#window_vpnprofile_phase2lifetime"),!VpnProfile.isNotValid(t)){var l=t.val(),o=VpnProfileEncapTypeSelect.getValue(),s=VpnProfilePhase1AlgoSelect.getValue(),p=VpnProfilePhase1AuthSelect.getValue(),r=VpnProfilePhase1DhgSelect.getValue(),c=VpnProfilePhase2AlgoSelect.getValue(),d=VpnProfilePhase2AuthSelect.getValue(),u=VpnProfilePhase2DhgSelect.getValue(),f="",h="",g="";switch(o){case"Multicast":case"Point-To-Point":if(t=$("#window_vpnprofile_encaplocalendpoint"),VpnProfile.isNotValid(t))return;if(f=VpnProfileEncapLocalEndpointSelect.getValue(),t=$("#window_vpnprofile_encapremoteendpoint"),VpnProfile.isNotValid(t))return;h=VpnProfileEncapRemoteEndpointSelect.getValue();break;case"Client-Server":if(t=$("#window_vpnprofile_encapservice"),VpnProfile.isNotValid(t))return;if(g=VpnProfileEncapServiceSelect.getValue(),t=$("#window_vpnprofile_encapremoteendpoint"),VpnProfile.isNotValid(t))return;h=VpnProfileEncapRemoteEndpointSelect.getValue()}$("#window_vpnprofile_save").addClass("disabled");var v="";v="0"===e?"/vpn/profile/create":"/vpn/profile/update",$.ajax({type:"POST",url:v,data:{VpnProfileId:e,Name:n,Description:i,Phase1Algo:s,Phase1Auth:p,Phase1Dhg:r,Phase1LifeTime:a,Phase2Algo:c,Phase2Auth:d,Phase2Dhg:u,Phase2LifeTime:l,EncapType:o,EncapLocalEndpoint:f,EncapRemoteEndpoint:h,EncapService:g},dataType:"json",success:function(e){$("#window_vpnprofile_save").removeClass("disabled"),"OK"==e.Result?(VpnProfile.unloadAllSelects(),VpnProfileModalWindow.hide(),VpnProfile.reloadTable(CurrentPage),setTimeout(UIkit.notify({message:e.Message,status:e.Status,timeout:2e3,pos:"top-center"}),5e3)):"DUP"==e.Result&&($("#invalid-form-error-message").text(e.Message),$("#window_vpnprofile_name").select(),VpnProfile.fadeInvalidFormErrorMessage())}})}}}}})},refreshTable:function(){$("#record_table li:first:contains('No data')").remove(),"0"==$("#records_number").val()&&($("ul#record_table").append($("<li>").append($("<div>").attr("class","md-card").append($("<div>").attr("class","md-card-content").append($("<div>").attr({class:"uk-grid uk-grid-medium","data-uk-grid-margin":"","data-uk-grid-match":"{target:'.md-card'}"}).append($("<div>").attr("class","uk-width-1-1 uk-text-center").append($("<span>").attr("class","uk-text-large uk-text-bold uk-text-danger").text("No data available!"))))))),$("ul#pagination").empty())},clearTable:function(){$("ul#record_table").empty(),$("ul#pagination").empty()},loadPagination:function(e,t,n){if(0===n)return!1;total_pages=Math.ceil(n/t);var i=e>=total_pages,a=e-1,l=e+1;for(e<=1?$("ul#pagination").append($("<li>").attr("class","uk-disabled").append($("<span>").append($("<i>").attr("class","uk-icon-angle-double-left")))).append($("<li>").attr("class","uk-disabled").append($("<span>").append($("<i>").attr("class","uk-icon-angle-left")))):$("ul#pagination").append($("<li>").append($("<a>").attr({href:"#",onclick:"VpnProfile.reloadTable( 1,"+t+")"}).append($("<i>").attr("class","uk-icon-angle-double-left")))).append($("<li>").append($("<a>").attr({href:"#",onclick:"VpnProfile.reloadTable("+a+","+t+")"}).append($("<i>").attr("class","uk-icon-angle-left")))),index_page=1;index_page<total_pages+1;index_page++)e==index_page?$("ul#pagination").append($("<li>").attr("class","uk-active").append($("<span>").text(index_page))):$("ul#pagination").append($("<li>").append($("<a>").attr({href:"#",onclick:"VpnProfile.reloadTable("+index_page+","+t+")"}).text(index_page)));i?$("ul#pagination").append($("<li>").attr("class","uk-disabled").append($("<span>").append($("<i>").attr("class","uk-icon-angle-right")))).append($("<li>").attr("class","uk-disabled").append($("<span>").append($("<i>").attr("class","uk-icon-angle-double-right")))):$("ul#pagination").append($("<li>").append($("<a>").attr({href:"#",onclick:"VpnProfile.reloadTable("+l+","+t+")"}).append($("<i>").attr("class","uk-icon-angle-right")))).append($("<li>").append($("<a>").attr({href:"#",onclick:"VpnProfile.reloadTable( "+total_pages+","+t+")"}).append($("<i>").attr("class","uk-icon-angle-double-right")))),CurrentPage=e},reloadTable:function(e,t){VpnProfile.clearTable(),VpnProfile.loadTable(e,t)},loadTable:function(e,t){$("#page_size").length&&($("#page_size").selectize({plugins:{remove_button:{label:""}},options:[{id:5,title:"5"},{id:10,title:"10"},{id:25,title:"25"},{id:50,title:"50"},{id:100,title:"100"},{id:250,title:"250"},{id:500,title:"500"}],maxItems:1,valueField:"id",labelField:"title",searchField:"title",create:!1,onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})},onChange:function(){VpnProfile.reloadTable(CurrentPage)}}),$("#page_size option:selected").each(function(){t=$(this).text()}));var n=((e=void 0!==e?e:1)-1)*(t=void 0!==t?t:5),i=0;$.ajax({type:"GET",url:"/vpn/profile/read",data:{StartIndex:n,PageSize:t},dataType:"json",success:function(n){i=n.TotalRecordCount,n.Records.length!=i&&0===n.Records.length&&0!==i?VpnProfile.loadTable(--e,t):(VpnProfile.perform(n.Records,"drawTable"),VpnProfile.loadPagination(e,t,i))}})},perform:function(e,t){var n=$("#window_vpnprofile_row").val();"drawTable"===t&&(n=0),$.each(e,function(e,i){"drawTable"===t&&(n=e+1),"editRow"===t?($("#name-"+n).text(i.Name),$("#description-"+n).text(i.Description),$("#group-"+n).text("Group: "+i.Group),$("#version-"+n).text("Version: "+i.Version),$("#type-"+n).text("Type: "+i.Type),$("#value-"+n).text(i.Value)):(encapTypeDisplay="IPSec Only","None"!==i.EncapType&&(encapTypeDisplay=i.EncapType),$("ul#record_table").append($("<li>").append($("<div>").attr("class","md-card").append($("<div>").attr("class","md-card-content").append($("<div>").attr({class:"uk-grid uk-grid-medium","data-uk-grid-margin":"","data-uk-grid-match":"{target:'.md-card'}"}).append($("<div>").attr("class","uk-width-2-10").append($("<div>").attr("class","uk-grid").append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-large",id:"name-"+n}).text(i.Name))).append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-muted uk-text-small uk-text-truncate",id:"description-"+n}).text(i.Description))))).append($("<div>").attr("class","uk-width-2-10").append($("<div>").attr("class","uk-grid").append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-muted uk-text-small",id:"phase1algo-"+n}).text("Phase 1 Enc: "+i.Phase1Algo))).append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-muted uk-text-small",id:"phase1auth-"+n}).text("Phase 1 Auth: "+i.Phase1Auth))))).append($("<div>").attr("class","uk-width-2-10").append($("<div>").attr("class","uk-grid").append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-muted uk-text-small",id:"phase2algo-"+n}).text("Phase 2 Enc: "+i.Phase2Algo))).append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-muted uk-text-small",id:"phase2auth-"+n}).text("Phase 2 Auth: "+i.Phase2Auth))))).append($("<div>").attr("class","uk-width-2-10").append($("<div>").attr("class","uk-grid").append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-middle",id:"value-"+n}).text("Type: "+encapTypeDisplay))).append($("<div>").attr("class","uk-width-1-1").append($("<span>").attr({class:"uk-text-muted uk-text-small",id:"encapremoteendpoint-"+n}).text(i.EncapRemoteEndpoint))))).append($("<div>").attr("class","uk-width-2-10").append($("<div>").attr({class:"uk-grid uk-grid-medium","data-uk-grid-margin":"","data-uk-grid-match":"{target:'.md-card'}"}).append($("<div>").attr("class","uk-width-1-2").append($("<a>").attr({"data-uk-tooltip":"{cls:'uk-tooltip-small',pos:'top-left',animation:'true'}",title:"Delete",onclick:"VpnProfile.remove(this)",href:"#",id:"delete_VpnProfile-"+n+"-"+i.VpnProfileId}).append($("<img>").attr({src:"/static/assets/img/md-images/delete.png",alt:"Delete"})))).append($("<div>").attr("class","uk-width-1-2").append($("<a>").attr({"data-uk-tooltip":"{cls:'uk-tooltip-small',pos:'top-left',animation:'true'}",title:"Edit",onclick:"VpnProfile.edit(this)",href:"#",id:"edit_VpnProfile-"+n+"-"+i.VpnProfileId}).append($("<img>").attr({src:"/static/assets/img/md-images/pencil.png",alt:"Edit"})))))))))),$("#records_number").val(n))}),VpnProfile.refreshTable()},initEncapTypeSelect:function(){$VpnProfileEncapTypeSelect=$("#window_vpnprofile_encaptype").selectize({options:[{value:"None",title:"None (IPSec only)"},{value:"Multicast",title:"Multicast tunnel"},{value:"Point-To-Point",title:"Point to point tunnel"},{value:"Client-Server",title:"Client-Server tunnel"}],maxItems:1,valueField:"value",labelField:"title",searchField:"title",create:!1,onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})},onChange:function(e){"None"===e?$(".encap-field").hide():$(".encap-field").show(),$(".encap").hide(),$("."+e).show()}}),VpnProfileEncapTypeSelect=$VpnProfileEncapTypeSelect[0].selectize},initPhase1AlgoSelect:function(){$VpnProfilePhase1AlgoSelect=$("#window_vpnprofile_phase1algo").selectize({options:[{value:"3des",title:"3DES"},{value:"aes128",title:"AES-128"},{value:"aes192",title:"AES-192"},{value:"aes256",title:"AES-256"}],maxItems:1,valueField:"value",labelField:"title",searchField:"title",create:!1,onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),VpnProfilePhase1AlgoSelect=$VpnProfilePhase1AlgoSelect[0].selectize},initPhase1AuthSelect:function(){$VpnProfilePhase1AuthSelect=$("#window_vpnprofile_phase1auth").selectize({options:[{value:"md5",title:"MD5"},{value:"sha1",title:"SHA1"}],maxItems:1,valueField:"value",labelField:"title",searchField:"title",create:!1,onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),VpnProfilePhase1AuthSelect=$VpnProfilePhase1AuthSelect[0].selectize},initPhase1DhgSelect:function(){$VpnProfilePhase1DhgSelect=$("#window_vpnprofile_phase1dhg").selectize({options:[{value:"1",title:"1 (DH768)"},{value:"2",title:"2 (DH1024)"},{value:"5",title:"5 (DH1536)"},{value:"14",title:"14 (DH2048)"},{value:"15",title:"15 (DH3072)"},{value:"16",title:"16 (DH4096)"}],maxItems:1,valueField:"value",labelField:"title",searchField:["title","value"],onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),VpnProfilePhase1DhgSelect=$VpnProfilePhase1DhgSelect[0].selectize},initPhase2AlgoSelect:function(){$VpnProfilePhase2AlgoSelect=$("#window_vpnprofile_phase2algo").selectize({options:[{value:"3des",title:"3DES"},{value:"aes128",title:"AES-128"},{value:"aes192",title:"AES-192"},{value:"aes256",title:"AES-256"}],maxItems:1,valueField:"value",labelField:"title",searchField:"title",create:!1,onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),VpnProfilePhase2AlgoSelect=$VpnProfilePhase2AlgoSelect[0].selectize},initPhase2AuthSelect:function(){$VpnProfilePhase2AuthSelect=$("#window_vpnprofile_phase2auth").selectize({options:[{value:"md5",title:"MD5"},{value:"sha1",title:"SHA1"}],maxItems:1,valueField:"value",labelField:"title",searchField:"title",create:!1,onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),VpnProfilePhase2AuthSelect=$VpnProfilePhase2AuthSelect[0].selectize},initPhase2DhgSelect:function(){$VpnProfilePhase2DhgSelect=$("#window_vpnprofile_phase2dhg").selectize({options:[{value:"1",title:"1 (DH768)"},{value:"2",title:"2 (DH1024)"},{value:"5",title:"5 (DH1536)"},{value:"14",title:"14 (DH2048)"},{value:"15",title:"15 (DH3072)"},{value:"16",title:"16 (DH4096)"}],maxItems:1,valueField:"value",labelField:"title",searchField:["title","value"],onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),VpnProfilePhase2DhgSelect=$VpnProfilePhase2DhgSelect[0].selectize},initEncapLocalEndpointSelect:function(){var e="(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";$VpnProfileEncapLocalEndpointSelect=$("#window_vpnprofile_encaplocalendpoint").selectize({maxItems:1,valueField:"value",labelField:"name",searchField:["name","value"],options:[],render:{item:function(e,t){return"<div>"+(e.name?'<span class="name">'+t(e.name)+"</span>":"")+(e.value?'<span class="email">'+t(e.value)+"</span>":"")+"</div>"},option:function(e,t){var n=e.name||e.value,i=e.name?e.value:null;return'<div><span class="label">'+t(n)+"</span>"+(i?'<span class="caption">'+t(i)+"</span>":"")+"</div>"}},createFilter:function(t){var n,i;return i=new RegExp("^"+e+"$","i"),(n=t.match(i))?!this.options.hasOwnProperty(n[0]):(i=new RegExp("^([^<]*)<"+e+">$","i"),!!(n=t.match(i))&&!this.options.hasOwnProperty(n[2]))},create:function(t){if(new RegExp("^"+e+"$","i").test(t))return{value:t};var n=t.match(new RegExp("^([^<]*)<"+e+">$","i"));return n?{value:n[2],name:$.trim(n[1])}:(alert("Invalid value group."),!1)},onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),(VpnProfileEncapLocalEndpointSelect=$VpnProfileEncapLocalEndpointSelect[0].selectize).load(function(e){encap_local_endpoint_xhr&&encap_local_endpoint_xhr.abort(),encap_local_endpoint_xhr=$.ajax({url:"/objects/address/getlist",success:function(t){e(t)},error:function(){e()}})})},initEncapRemoteEndpointSelect:function(){var e="(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";$VpnProfileEncapRemoteEndpointSelect=$("#window_vpnprofile_encapremoteendpoint").selectize({maxItems:1,valueField:"value",labelField:"name",searchField:["name","value"],options:[],render:{item:function(e,t){return"<div>"+(e.name?'<span class="name">'+t(e.name)+"</span>":"")+(e.value?'<span class="email">'+t(e.value)+"</span>":"")+"</div>"},option:function(e,t){var n=e.name||e.value,i=e.name?e.value:null;return'<div><span class="label">'+t(n)+"</span>"+(i?'<span class="caption">'+t(i)+"</span>":"")+"</div>"}},createFilter:function(t){var n,i;return i=new RegExp("^"+e+"$","i"),(n=t.match(i))?!this.options.hasOwnProperty(n[0]):(i=new RegExp("^([^<]*)<"+e+">$","i"),!!(n=t.match(i))&&!this.options.hasOwnProperty(n[2]))},create:function(t){if(new RegExp("^"+e+"$","i").test(t))return{value:t};var n=t.match(new RegExp("^([^<]*)<"+e+">$","i"));return n?{value:n[2],name:$.trim(n[1])}:(alert("Invalid value group."),!1)},onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),(VpnProfileEncapRemoteEndpointSelect=$VpnProfileEncapRemoteEndpointSelect[0].selectize).load(function(e){encap_remote_endpoint_xhr&&encap_remote_endpoint_xhr.abort(),encap_remote_endpoint_xhr=$.ajax({url:"/objects/address/getlist",success:function(t){e(t)},error:function(){e()}})})},initEncapServiceSelect:function(){$VpnProfileEncapServiceSelect=$("#window_vpnprofile_encapservice").selectize({maxItems:1,valueField:"value",labelField:"name",searchField:["name","value"],options:[],render:{item:function(e,t){return"<div>"+(e.name?'<span class="name">'+t(e.name)+"</span>":"")+(e.value?'<span class="email">'+t(e.value)+"</span>":"")+"</div>"},option:function(e,t){var n=e.name||e.value,i=e.name?e.value:null;return'<div><span class="label">'+t(n)+"</span>"+(i?'<span class="caption">'+t(i)+"</span>":"")+"</div>"}},onDropdownOpen:function(e){e.hide().velocity("slideDown",{begin:function(){e.css({"margin-top":"0"})},duration:200,easing:easing_swiftOut})},onDropdownClose:function(e){e.show().velocity("slideUp",{complete:function(){e.css({"margin-top":""})},duration:200,easing:easing_swiftOut})}}),(VpnProfileEncapServiceSelect=$VpnProfileEncapServiceSelect[0].selectize).load(function(e){encap_service_xhr&&encap_service_xhr.abort(),encap_service_xhr=$.ajax({url:"/objects/protocol/getlist",type:"GET",dataType:"json",success:function(t){e(t)},error:function(){console.log("error has occured!!!"),e()}})})},char_words_counter:function(){var e=$(".input-count");e.length&&(!function(e){"use strict";e.fn.extend({counter:function(t){var n={type:"char",count:"down",goal:140,text:!0,target:!1,append:!0,translation:"",msg:"",container_class:""},i="",a="",l=!1,o=(t=e.extend({},n,t),{init:function(n){var a=n.attr("id"),l=a+"_count";o.isLimitless(),i=e("<span id="+l+"/>");var s=e("<div/>").attr("id",a+"_counter").append(i).append(" "+o.setMsg());t.container_class&&t.container_class.length&&s.addClass(t.container_class),t.target&&e(t.target).length?t.append?e(t.target).append(s):e(t.target).prepend(s):t.append?s.insertAfter(n):s.insertBefore(n),o.bind(n)},bind:function(e){e.bind("keypress.counter keydown.counter keyup.counter blur.counter focus.counter change.counter paste.counter",o.updateCounter),e.bind("keydown.counter",o.doStopTyping),e.trigger("keydown")},isLimitless:function(){if("sky"===t.goal)return t.count="up",l=!0},setMsg:function(){if(""!==t.msg)return t.msg;if(!1===t.text)return"";if(l)return""!==t.msg?t.msg:"";switch(this.text=t.translation||"character word left max",this.text=this.text.split(" "),this.chars="s ( )".split(" "),this.msg=null,t.type){case"char":t.count===n.count&&t.text?this.msg=this.text[0]+this.chars[1]+this.chars[0]+this.chars[2]+" "+this.text[2]:"up"===t.count&&t.text&&(this.msg=this.text[0]+this.chars[0]+" "+this.chars[1]+t.goal+" "+this.text[3]+this.chars[2]);break;case"word":t.count===n.count&&t.text?this.msg=this.text[1]+this.chars[1]+this.chars[0]+this.chars[2]+" "+this.text[2]:"up"===t.count&&t.text&&(this.msg=this.text[1]+this.chars[1]+this.chars[0]+this.chars[2]+" "+this.chars[1]+t.goal+" "+this.text[3]+this.chars[2])}return this.msg},getWords:function(t){return""!==t?e.trim(t).replace(/\s+/g," ").split(" ").length:0},updateCounter:function(l){var s=e(this);(a<0||a>t.goal)&&o.passedGoal(s),t.type===n.type?t.count===n.count?(a=t.goal-s.val().length)<=0?i.text("0"):i.text(a):"up"===t.count&&(a=s.val().length,i.text(a)):"word"===t.type&&(t.count===n.count?(a=o.getWords(s.val()))<=t.goal?(a=t.goal-a,i.text(a)):i.text("0"):"up"===t.count&&(a=o.getWords(s.val()),i.text(a)))},doStopTyping:function(e){var i=[46,8,9,35,36,37,38,39,40,32];if(o.isGoalReached(e)&&e.keyCode!==i[0]&&e.keyCode!==i[1]&&e.keyCode!==i[2]&&e.keyCode!==i[3]&&e.keyCode!==i[4]&&e.keyCode!==i[5]&&e.keyCode!==i[6]&&e.keyCode!==i[7]&&e.keyCode!==i[8])return t.type!==n.type&&(e.keyCode!==i[9]&&e.keyCode!==i[1]&&t.type!=n.type)},isGoalReached:function(e,i){return!l&&(t.count===n.count?a<=(i=0):(i=t.goal,a>=i))},wordStrip:function(t,n){var i=n.replace(/\s+/g," ").split(" ").length;return n=e.trim(n),t<=0||t===i?n:((n=e.trim(n).split(" ")).splice(t,i,""),e.trim(n.join(" ")))},passedGoal:function(e){var n=e.val();"word"===t.type&&e.val(o.wordStrip(t.goal,n)),"char"===t.type&&e.val(n.substring(0,t.goal)),"down"===t.type&&i.val("0"),"up"===t.type&&i.val(t.goal)}});return this.each(function(){o.init(e(this))})}})}(jQuery),e.each(function(){var e=$(this),t=$(this).attr("maxlength")?$(this).attr("maxlength"):80;e.counter({container_class:"text-count-wrapper",msg:" / "+t,goal:t,count:"up"}),e.closest(".md-input-wrapper").length&&e.closest(".md-input-wrapper").addClass("md-input-wrapper-count")}))},fadeInvalidFormErrorMessage:function(){$("#invalid-form-error-window").css("display","inline").fadeToggle(4e3)},form_validator:function(){var e=$("#window_vpnprofile_form");e.parsley().on("form:validated",function(){altair_md.update_input(e.find(".md-input-danger"))}).on("field:validated",function(e){$(e.$element).hasClass("md-input")&&altair_md.update_input($(e.$element))})},clearValidationErrors:function(){$("#window_vpnprofile_form").parsley().reset()},loadAllSelects:function(){VpnProfile.initEncapLocalEndpointSelect(),VpnProfile.initEncapRemoteEndpointSelect(),VpnProfile.initEncapServiceSelect()},unloadAllSelects:function(){VpnProfileEncapLocalEndpointSelect.destroy(),VpnProfileEncapRemoteEndpointSelect.destroy(),VpnProfileEncapServiceSelect.destroy()}};